MIR_CLIENT_9 {
 global:
    mir_arrow_cursor_name;
    mir_buffer_stream_get_current_buffer;
    mir_buffer_stream_get_egl_native_window;
    mir_buffer_stream_get_graphics_region;
    mir_buffer_stream_get_platform_type;
    mir_buffer_stream_is_valid;
    mir_buffer_stream_release;
    mir_buffer_stream_release_sync;
    mir_buffer_stream_swap_buffers;
    mir_buffer_stream_swap_buffers_sync;
    mir_busy_cursor_name;
    mir_caret_cursor_name;
    mir_closed_hand_cursor_name;
    mir_connect;
    mir_connection_api_impl;
    mir_connection_apply_display_config;
    mir_connection_create_buffer_stream;
    mir_connection_create_buffer_stream_sync;
    mir_connection_create_display_config;
    mir_connection_create_prompt_session_sync;
    mir_connection_create_screencast_sync;
    mir_connection_create_spec_for_changes;
    mir_connection_create_spec_for_dialog;
    mir_connection_create_spec_for_input_method;
    mir_connection_create_spec_for_menu;
    mir_connection_create_spec_for_modal_dialog;
    mir_connection_create_spec_for_normal_surface;
    mir_connection_create_spec_for_tooltip;
    mir_connection_get_available_surface_formats;
    mir_connection_get_egl_native_display;
    mir_connection_get_error_message;
    mir_connection_get_platform;
    mir_connection_is_valid;
    mir_connection_platform_operation;
    mir_connection_release;
    mir_connection_set_display_config_change_callback;
    mir_connection_set_lifecycle_event_callback;
    mir_connect_sync;
    mir_create_surface_spec;
    mir_cursor_configuration_destroy;
    mir_cursor_configuration_from_buffer_stream;
    mir_cursor_configuration_from_name;
    mir_default_cursor_name;
    mir_diagonal_resize_bottom_to_top_cursor_name;
    mir_diagonal_resize_top_to_bottom_cursor_name;
    mir_disabled_cursor_name;
    mir_display_config_destroy;
    mir_event_get_close_surface_event;
    mir_event_get_input_configuration_event;
    mir_event_get_input_event;
    mir_event_get_keymap_event;
    mir_event_get_orientation_event;
    mir_event_get_prompt_session_event;
    mir_event_get_resize_event;
    mir_event_get_surface_event;
    mir_event_get_type;
    mir_event_ref;
    mir_event_unref;
    mir_horizontal_resize_cursor_name;
    mir_hsplit_resize_cursor_name;
    mir_input_configuration_event_get_action;
    mir_input_configuration_event_get_device_id;
    mir_input_configuration_event_get_time;
    mir_input_event_get_device_id;
    mir_input_event_get_event_time;
    mir_input_event_get_keyboard_event;
    mir_input_event_get_pointer_event;
    mir_input_event_get_touch_event;
    mir_input_event_get_type;
    mir_keyboard_event_action;
    mir_keyboard_event_key_code;
    mir_keyboard_event_modifiers;
    mir_keyboard_event_scan_code;
    mir_keymap_event_get_rules;
    mir_omnidirectional_resize_cursor_name;
    mir_open_hand_cursor_name;
    mir_orientation_event_get_direction;
    mir_persistent_id_is_valid;
    mir_persistent_id_release;
    mir_platform_message_create;
    mir_platform_message_get_data;
    mir_platform_message_get_fds;
    mir_platform_message_get_opcode;
    mir_platform_message_release;
    mir_platform_message_set_data;
    mir_platform_message_set_fds;
    mir_pointer_event_action;
    mir_pointer_event_axis_value;
    mir_pointer_event_buttons;
    mir_pointer_event_button_state;
    mir_pointer_event_modifiers;
    mir_pointing_hand_cursor_name;
    mir_prompt_session_error_message;
    mir_prompt_session_event_get_state;
    mir_prompt_session_is_valid;
    mir_prompt_session_new_fds_for_prompt_providers;
    mir_prompt_session_release_sync;
    mir_resize_event_get_height;
    mir_resize_event_get_width;
    mir_screencast_get_buffer_stream;
    mir_screencast_release_sync;
    mir_surface_apply_spec;
    mir_surface_configure_cursor;
    mir_surface_create;
    mir_surface_create_sync;
    mir_surface_event_get_attribute;
    mir_surface_event_get_attribute_value;
    mir_surface_get_buffer_stream;
    mir_surface_get_dpi;
    mir_surface_get_error_message;
    mir_surface_get_focus;
    mir_surface_get_orientation;
    mir_surface_get_parameters;
    mir_surface_get_preferred_orientation;
    mir_surface_get_state;
    mir_surface_get_swapinterval;
    mir_surface_get_type;
    mir_surface_get_visibility;
    mir_surface_is_valid;
    mir_surface_release;
    mir_surface_release_sync;
    mir_surface_request_persistent_id;
    mir_surface_request_persistent_id_sync;
    mir_surface_set_event_handler;
    mir_surface_set_preferred_orientation;
    mir_surface_set_state;
    mir_surface_set_swapinterval;
    mir_surface_spec_release;
    mir_surface_spec_set_buffer_usage;
    mir_surface_spec_set_fullscreen_on_output;
    mir_surface_spec_set_height;
    mir_surface_spec_set_height_increment;
    mir_surface_spec_set_max_aspect_ratio;
    mir_surface_spec_set_max_height;
    mir_surface_spec_set_max_width;
    mir_surface_spec_set_min_aspect_ratio;
    mir_surface_spec_set_min_height;
    mir_surface_spec_set_min_width;
    mir_surface_spec_set_name;
    mir_surface_spec_set_parent;
    mir_surface_spec_set_pixel_format;
    mir_surface_spec_set_placement;
    mir_surface_spec_set_preferred_orientation;
    mir_surface_spec_set_state;
    mir_surface_spec_set_streams;
    mir_surface_spec_set_type;
    mir_surface_spec_set_width;
    mir_surface_spec_set_width_increment;
    mir_touch_event_action;
    mir_touch_event_axis_value;
    mir_touch_event_id;
    mir_touch_event_modifiers;
    mir_touch_event_point_count;
    mir_touch_event_tooltype;
    mir_vertical_resize_cursor_name;
    mir_vsplit_resize_cursor_name;
    mir_wait_for;
    mir_wait_for_one;
 local: *;
};

MIR_CLIENT_9.1 {  # New functions in Mir 0.15
  global:
    mir_connection_pong;
    mir_connection_set_ping_event_callback;
    mir_crosshair_cursor_name;
    mir_keyboard_event_input_event;
    mir_persistent_id_as_string;
    mir_persistent_id_from_string;
    mir_pointer_event_input_event;
    mir_touch_event_input_event;
    mir_surface_spec_attach_to_foreign_parent;
    mir_surface_spec_set_input_shape;
    mir_connection_get_egl_pixel_format;
} MIR_CLIENT_9;

MIR_CLIENT_9.2 {  # New functions in Mir 0.16
  global:
    mir_surface_spec_set_event_handler;
} MIR_CLIENT_9.1;

MIR_CLIENT_9v17 {
    mir_blob_from_display_configuration;
    mir_blob_size;
    mir_blob_data;
    mir_blob_release;
    mir_blob_onto_buffer;
    mir_blob_to_display_configuration;
    mir_blob_release;
    mir_buffer_stream_set_scale;
    mir_buffer_stream_set_scale_sync;
    mir_event_get_surface_output_event;
    mir_surface_output_event_get_dpi;
    mir_surface_output_event_get_form_factor;
    mir_surface_output_event_get_scale;
} MIR_CLIENT_9.2;

MIR_CLIENT_9v18 {
  global:
    mir_buffer_stream_get_error_message;
    mir_surface_output_event_get_output_id;
    mir_connection_set_base_display_config;
} MIR_CLIENT_9v17;

MIR_CLIENT_9v19 {
  global:
    mir_connection_get_graphics_module;
    mir_surface_raise;
    mir_input_event_has_cookie;
    mir_cookie_buffer_size;
    mir_input_event_get_cookie;
    mir_cookie_to_buffer;
    mir_cookie_from_buffer;
    mir_cookie_release;
    mir_keymap_event_get_keymap_buffer;
    mir_keymap_event_get_device_id;
    mir_surface_spec_set_shell_chrome;
} MIR_CLIENT_9v18;

MIR_CLIENT_0.21 {
  global:
    mir_connection_apply_display_configuration;
    mir_connection_create_display_configuration;
    mir_connection_create_input_config;
    mir_connection_set_input_config_change_callback;
    mir_display_config_get_max_simultaneous_outputs;
    mir_display_config_get_num_outputs;
    mir_display_config_get_output;
    mir_display_config_release;
    mir_input_config_destroy;
    mir_input_config_device_count;
    mir_input_config_get_device;
    mir_input_config_get_device_by_id;
    mir_input_config_get_mutable_device;
    mir_input_config_get_mutable_device_by_id;
    mir_input_device_get_capabilities;
    mir_input_device_get_id;
    mir_input_device_get_name;
    mir_input_device_get_unique_id;
    mir_output_get_connection_state;
    mir_output_get_current_mode;
    mir_output_get_current_pixel_format;
    mir_output_get_form_factor;
    mir_output_get_id;
    mir_output_get_mode;
    mir_output_get_num_modes;
    mir_output_get_num_pixel_formats;
    mir_output_get_orientation;
    mir_output_get_physical_height_mm;
    mir_output_get_physical_width_mm;
    mir_output_get_pixel_format;
    mir_output_get_position_x;
    mir_output_get_position_y;
    mir_output_get_power_mode;
    mir_output_get_preferred_mode;
    mir_output_get_scale_factor;
    mir_output_get_type;
    mir_output_is_enabled;
    mir_output_mode_get_height;
    mir_output_mode_get_refresh_rate;
    mir_output_mode_get_width;
} MIR_CLIENT_9v19;

MIR_CLIENT_0.22 {  # New functions in Mir 0.22
  global:
    mir_connection_confirm_base_display_configuration;
    mir_connection_preview_base_display_configuration;
    mir_connection_set_error_callback;
    mir_create_screencast_spec;
    mir_display_config_get_mutable_output;
    mir_error_get_code;
    mir_error_get_domain;
    mir_output_disable;
    mir_output_enable;
    mir_output_set_current_mode;
    mir_output_set_orientation;
    mir_output_set_pixel_format;
    mir_output_set_position;
    mir_output_set_power_mode;
    mir_screencast_create_sync;
    mir_screencast_get_error_message;
    mir_screencast_is_valid;
    mir_screencast_spec_release;
    mir_screencast_spec_set_capture_region;
    mir_screencast_spec_set_height;
    mir_screencast_spec_set_mirror_mode;
    mir_screencast_spec_set_number_of_buffers;
    mir_screencast_spec_set_pixel_format;
    mir_screencast_spec_set_width;
} MIR_CLIENT_0.21;

MIR_CLIENT_DETAIL_9 {
  global:
    extern "C++" { 
      mir::events::make_event*;
      mir::events::add_touch*;
      mir::client::DefaultConnectionConfiguration::DefaultConnectionConfiguration*;
      mir::client::DefaultConnectionConfiguration::the_surface_map*;
      mir::client::DefaultConnectionConfiguration::the_rpc_channel*;
      mir::client::DefaultConnectionConfiguration::the_logger*;
      mir::client::DefaultConnectionConfiguration::the_input_platform*;
      mir::client::DefaultConnectionConfiguration::the_display_configuration*;
      mir::client::DefaultConnectionConfiguration::the_lifecycle_control*;
      mir::client::DefaultConnectionConfiguration::the_ping_handler*;
      mir::client::DefaultConnectionConfiguration::the_event_sink*;
      mir::client::DefaultConnectionConfiguration::the_event_handler_register*;
      mir::client::DefaultConnectionConfiguration::the_socket_file*;
      mir::client::DefaultConnectionConfiguration::the_rpc_report*;
      mir::client::DefaultConnectionConfiguration::the_input_receiver_report*;
      typeinfo?for?mir::client::DefaultConnectionConfiguration;
      vtable?for?mir::client::DefaultConnectionConfiguration;
      mir::operator???std::ostream???Mir*
    };
};

MIR_CLIENT_DETAIL_9v18 {
  global:
    extern "C++" { 
      mir::client::DefaultConnectionConfiguration::the_input_devices*;
      mir::events::set_modifier*;
      mir::events::set_cursor_position*;
      mir::events::set_button_state*;
    };
} MIR_CLIENT_DETAIL_9;

MIR_CLIENT_DETAIL_0.21 {
  global:
    extern "C++" { 
      mir::client::DefaultConnectionConfiguration::the_buffer_factory*;
    };
} MIR_CLIENT_DETAIL_9v18;

MIR_CLIENT_DETAIL_private_buffer_semantics {
  global:
    # These functions will be republished under a different
    # name as a result of the MirRenderSurface-->MirSurface
    # renaming transition.
    mir_connection_create_render_surface;
    mir_connection_create_render_surface_sync;
    mir_render_surface_get_buffer_stream;
    mir_render_surface_get_presentation_chain;
    mir_render_surface_is_valid;
    mir_render_surface_get_error_message;
    mir_render_surface_get_size;
    mir_render_surface_set_size;
    mir_render_surface_release;
    mir_connection_present_mode_supported;
    mir_presentation_chain_set_mode;
    mir_window_spec_add_render_surface;
    mir_window_spec_set_cursor_render_surface;
    mir_cursor_configuration_from_render_surface;

    #private functions needed temporarily by nested passthrough
    #should not be published along with the rest of the NBS symbols
    mir_buffer_get_egl_image_parameters;
    mir_presentation_chain_set_queueing_mode;
    mir_presentation_chain_set_dropping_mode;
} MIR_CLIENT_DETAIL_9v18;

MIR_CLIENT_DETAIL_0.24 {
  global:
    extern "C++" { 
      mir::input::receiver::XKBMapper::XKBMapper*;
      mir::input::receiver::XKBMapper::?XKBMapper*;
      mir::input::receiver::XKBMapper::set_key_state*;
      mir::input::receiver::XKBMapper::set_keymap*;
      mir::input::receiver::XKBMapper::reset_keymap*;
      mir::input::receiver::XKBMapper::map_event*;
    };
} MIR_CLIENT_DETAIL_0.21;

MIR_CLIENT_0.24 {  # New functions in Mir 0.24
  global:
    mir_event_get_input_device_state_event;
    mir_input_device_state_event_device_count;
    mir_input_device_state_event_device_id;
    mir_input_device_state_event_device_pointer_buttons;
    mir_input_device_state_event_device_pointer_buttons;
    mir_input_device_state_event_device_pressed_keys_count;
    # We're being naughty deleting this function without bumping soname, but we won't get caught.
    # mir_input_device_state_event_device_pressed_keys;
    mir_input_device_state_event_modifiers;
    mir_input_device_state_event_pointer_axis;
    mir_input_device_state_event_pointer_buttons;
    mir_input_device_state_event_time;
    mir_input_device_state_event_device_pointer_buttons;
    mir_surface_spec_set_pointer_confinement;
} MIR_CLIENT_0.22;

MIR_CLIENT_0.25 {  # New functions in Mir 0.25
  global:
    mir_connection_create_spec_for_tip;
    mir_event_get_surface_placement_event;
    mir_output_get_current_mode_index;
    mir_output_get_preferred_mode_index;
    mir_output_get_subpixel_arrangement;
    mir_output_get_gamma_size;
    mir_output_is_gamma_supported;
    mir_output_get_gamma;
    mir_output_set_gamma;
    mir_connection_cancel_base_display_configuration_preview;
    mir_surface_placement_get_relative_position;
    mir_display_output_type_name;
    mir_output_type_name;
    mir_surface_output_event_get_refresh_rate;
    mir_input_device_state_event_device_pressed_keys_for_index;
    mir_buffer_stream_set_swapinterval;
    mir_buffer_stream_get_swapinterval;
    mir_buffer_stream_set_size;
    mir_buffer_stream_get_size;
} MIR_CLIENT_0.24;

MIR_CLIENT_DETAIL_0.25 {
  global:
    extern "C++" {
      mir::client::DefaultConnectionConfiguration::the_error_handler*;
      mir::events::clone_event*;
      mir::events::transform_positions*;
    };
} MIR_CLIENT_DETAIL_0.24;

MIR_CLIENT_DETAIL_0.26 {
  global:
    extern "C++" {
        mir::client::to_client_context*;
    };
} MIR_CLIENT_DETAIL_0.25;

MIR_CLIENT_DETAIL_0.26.1 {
  global:
    extern "C++" {
        mir::client::render_surface_lookup*;
    };
} MIR_CLIENT_DETAIL_0.26;

MIR_CLIENT_0.26 {  # New functions in Mir 0.26
  global:
    mir_input_config_release;
    mir_input_device_get_mutable_pointer_config;
    mir_input_device_get_mutable_touchpad_config;
    mir_input_device_get_pointer_config;
    mir_input_device_get_touchpad_config;
    mir_output_get_edid;
    mir_output_get_edid_size;
    mir_output_set_scale_factor;
    mir_pointer_config_get_acceleration;
    mir_pointer_config_get_acceleration_bias;
    mir_pointer_config_get_handedness;
    mir_pointer_config_get_horizontal_scroll_scale;
    mir_pointer_config_get_vertical_scroll_scale;
    mir_pointer_config_set_acceleration;
    mir_pointer_config_set_acceleration_bias;
    mir_pointer_config_set_handedness;
    mir_pointer_config_set_horizontal_scroll_scale;
    mir_pointer_config_set_vertical_scroll_scale;
    mir_touchpad_config_get_button_down_scroll_button;
    mir_touchpad_config_get_click_modes;
    mir_touchpad_config_get_disable_while_typing;
    mir_touchpad_config_get_disable_with_mouse;
    mir_touchpad_config_get_middle_mouse_button_emulation;
    mir_touchpad_config_get_scroll_modes;
    mir_touchpad_config_get_tap_to_click;
    mir_touchpad_config_set_button_down_scroll_button;
    mir_touchpad_config_set_click_modes;
    mir_touchpad_config_set_disable_while_typing;
    mir_touchpad_config_set_disable_with_mouse;
    mir_touchpad_config_set_middle_mouse_button_emulation;
    mir_touchpad_config_set_scroll_modes;
    mir_touchpad_config_set_tap_to_click;
    mir_connection_request_extension;
    mir_output_get_model;
    mir_connection_apply_session_display_config;
    mir_connection_remove_session_display_config;
    mir_blob_from_display_config;
    mir_blob_to_display_config;
    mir_create_menu_window_spec;
    mir_create_normal_window_spec;
    mir_create_tip_window_spec;
    mir_create_modal_dialog_window_spec;
    mir_create_dialog_window_spec;
    mir_create_window_spec;
    mir_create_input_method_window_spec;
    mir_window_spec_set_parent;
    mir_window_spec_release;
    mir_window_spec_set_type;
    mir_window_spec_set_name;
    mir_window_spec_set_width;
    mir_window_spec_set_height;
    mir_window_spec_set_width_increment;
    mir_window_spec_set_height_increment;
    mir_window_spec_set_min_width;
    mir_window_spec_set_min_height;
    mir_window_spec_set_max_width;
    mir_window_spec_set_max_height;
    mir_window_spec_set_min_aspect_ratio;
    mir_window_spec_set_max_aspect_ratio;
    mir_window_spec_set_fullscreen_on_output;
    mir_window_spec_set_preferred_orientation;
    mir_window_spec_attach_to_foreign_parent;
    mir_window_spec_set_state;
    mir_window_spec_set_input_shape;
    mir_window_spec_set_event_handler;
    mir_window_spec_set_shell_chrome;
    mir_window_spec_set_pointer_confinement;
    mir_window_spec_set_placement;
    mir_window_spec_set_cursor_name;
    mir_window_spec_set_pixel_format;
    mir_window_spec_set_buffer_usage;
    mir_window_spec_set_streams;
    mir_window_apply_spec;
    mir_create_window;
    mir_create_window_sync;
    mir_window_release;
    mir_window_release_sync;
    mir_window_is_valid;
    mir_window_set_event_handler;
    mir_window_get_buffer_stream;
    mir_window_get_error_message;
    mir_window_get_parameters;
    mir_window_get_orientation;
    mir_window_raise;
    mir_event_get_window_event;
    mir_window_event_get_attribute;
    mir_window_event_get_attribute_value;
    mir_window_get_type;
    mir_event_get_window_output_event;
    mir_window_output_event_get_dpi;
    mir_window_output_event_get_form_factor;
    mir_window_output_event_get_scale;
    mir_window_output_event_get_output_id;
    mir_window_output_event_get_refresh_rate;
    mir_event_get_window_placement_event;
    mir_window_placement_get_relative_position;
    mir_window_set_state;
    mir_window_get_state;
    mir_window_get_focus_state;
    mir_window_get_visibility;
    mir_window_get_dpi;
    mir_window_configure_cursor;
    mir_window_set_preferred_orientation;
    mir_window_get_preferred_orientation;
    mir_window_request_persistent_id;
    mir_window_request_persistent_id_sync;
} MIR_CLIENT_0.25;

MIR_CLIENT_0.26.1 { # New functions in Mir 0.26.1
  global:
    mir_buffer_map;
    mir_buffer_unmap;
    mir_buffer_release;
    mir_presentation_chain_is_valid;
    mir_presentation_chain_get_error_message;
    mir_connection_allocate_buffer;
    mir_connection_allocate_buffer_sync;
    mir_presentation_chain_submit_buffer;
    mir_prompt_session_new_fds_for_prompt_providers_sync;
    mir_buffer_get_width;
    mir_buffer_get_height;
    mir_buffer_get_pixel_format;
    mir_buffer_is_valid;
    mir_buffer_get_error_message;
    mir_buffer_get_buffer_package;
    mir_window_id_release;
    mir_window_id_is_valid;
    mir_window_id_as_string;
    mir_window_id_from_string;
    mir_window_request_window_id;
    mir_window_request_window_id_sync;
} MIR_CLIENT_0.26;

MIR_CLIENT_DETAIL_0.27 {  # New functions in Mir 0.27
  global:
    extern "C++" {
      mir::events::set_window_id*;
      mir::events::make_start_drag_and_drop_event*;
      mir::events::set_drag_and_drop_handle*;
    };
} MIR_CLIENT_DETAIL_0.26.1;

MIR_CLIENT_0.27 {  # New functions in Mir 0.27
  global:
    mir_buffer_stream_get_microseconds_till_vblank;
    mir_connection_apply_session_input_config;
    mir_connection_enumerate_extensions;
    mir_connection_set_base_input_config;
    mir_screencast_capture_to_buffer;
    mir_screencast_capture_to_buffer_sync;
    mir_create_freestyle_window_spec;
    mir_create_gloss_window_spec;
    mir_create_satellite_window_spec;
    mir_create_utility_window_spec;
    mir_get_client_api_version;
    mir_input_device_get_keyboard_config;
    mir_input_device_get_mutable_keyboard_config;
    mir_input_device_get_mutable_touchscreen_config;
    mir_input_device_get_touchscreen_config;
    mir_input_event_get_event;
    mir_keyboard_config_get_keymap_layout;
    mir_keyboard_config_get_keymap_model;
    mir_keyboard_config_get_keymap_options;
    mir_keyboard_config_get_keymap_variant;
    mir_keyboard_config_set_keymap_layout;
    mir_keyboard_config_set_keymap_model;
    mir_keyboard_config_set_keymap_options;
    mir_keyboard_config_set_keymap_variant;
    mir_keyboard_event_key_text;
    mir_output_get_logical_height;
    mir_output_has_custom_logical_size;
    mir_output_set_logical_size;
    mir_output_get_logical_width;
    mir_window_get_connection;
    mir_window_request_user_move;
    mir_window_request_user_resize;
    mir_touchscreen_config_get_mapping_mode;
    mir_touchscreen_config_get_output_id;
    mir_touchscreen_config_set_mapping_mode;
    mir_touchscreen_config_set_output_id;
} MIR_CLIENT_0.26.1;

# When building with CMAKE_BUILD_TYPE=UBSanitize these are needed
MIR_CLIENT_UBSAN {
 global:
  extern "C++" {
      typeinfo?for?mir::input::receiver::XKBMapper;
  };
} MIR_CLIENT_0.26.1;

MIR_CLIENT_DETAIL_1.6 { # New functions in Mir 1.6 (used by mir_umock_unit_tests)
 global:
  extern "C++" {
      vtable?for?mir::input::receiver::XKBMapper;
  };
} MIR_CLIENT_DETAIL_0.26.1;